
<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Výpočet směny řidiče</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512x512.png">
    <meta name="theme-color" content="#007aff"/>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log("Service Worker registrován"))
                .catch(err => console.error("Chyba registrace SW:", err));
        }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f9f9f9;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 500px;
            margin: auto;
            background-color: #fff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h2 {
            text-align: center;
            color: #333;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: 500;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin-top: 6px;
            border: 1px solid #ccc;
            border-radius: 12px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            margin-top: 20px;
            width: 100%;
            padding: 14px;
            background-color: #007aff;
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #005fcb;
        }
        .output {
            margin-top: 20px;
            font-weight: bold;
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 12px;
            color: #333;
        }
        .green { color: green; }
        .red { color: red; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Výpočet směny řidiče</h2>
        <form id="driverForm">
            <label>Typ směny:
                <select id="shiftType">
                    <option value="den">Denní</option>
                    <option value="noc">Noční</option>
                    <option value="1/2">1/2 směna</option>
                </select>
            </label>
            <label>Celkem km: <input type="number" id="km" required></label>
            <label>Celková tržba (Kč): <input type="number" id="trzba" required></label>
            <label>Přístavné (Kč): <input type="number" id="pristavne" required></label>
            <label>Náklad na palivo (Kč): <input type="number" id="palivo" required></label>
            <label>Náklad na mytí (Kč): <input type="number" id="myti" required></label>
            <label>Platby kartou (Kč): <input type="number" id="karta" required></label>
            <label>Platby fakturou (Kč): <input type="number" id="faktura" required></label>
            <label>Jiné platby (Kč): <input type="number" id="jine" required></label>
            <button type="button" onclick="calculate()">Spočítat</button>
        </form>
        <div class="output" id="output"></div>
    </div>
    <script>
        function calculate() {
            const shift = document.getElementById('shiftType').value;
            const km = parseFloat(document.getElementById('km').value);
            const trzba = parseFloat(document.getElementById('trzba').value);
            const pristavne = parseFloat(document.getElementById('pristavne').value);
            const palivo = parseFloat(document.getElementById('palivo').value);
            const myti = parseFloat(document.getElementById('myti').value);
            const karta = parseFloat(document.getElementById('karta').value);
            const faktura = parseFloat(document.getElementById('faktura').value);
            const jine = parseFloat(document.getElementById('jine').value);

            const trzba_bez_pristavneho = trzba - pristavne;
            let vyplata = shift === '1/2'
                ? Math.max(0.30 * trzba_bez_pristavneho, 500)
                : Math.max(0.30 * trzba_bez_pristavneho, 1000);

            const odevzdava = trzba - vyplata - karta - faktura - jine - palivo - myti;
            const naklad_km = km * 15;
            const doplatek = naklad_km > trzba ? naklad_km - trzba : 0;
            const cena_palivo_na_km = km > 0 ? palivo / km : 0;
            const km_color = cena_palivo_na_km > 2.8 ? 'red' : 'green';

            let result = `
                Výplata řidiče: ${vyplata.toFixed(2)} Kč<br>
                Částka k odevzdání v hotovosti: ${odevzdava.toFixed(2)} Kč<br>
                Cena paliva na 1 km: <span class="${km_color}">${cena_palivo_na_km.toFixed(2)} Kč</span><br>
            `;
            if (doplatek > 0) {
                result += `<br><span style="color: red;">UPOZORNĚNÍ: Tržba nepokrývá náklad na km. Doplatek řidiče: ${doplatek.toFixed(2)} Kč</span>`;
            }

            document.getElementById('output').innerHTML = result;
        }
    </script>
</body>
</html>
